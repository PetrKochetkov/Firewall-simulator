<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editable Lists</title>
</head>

<body>
    <div id="firewall_mode">
        <h2>Current mode is {{ mode }}</h2>
        <p>Change mode to
            <input type="text" id="myInput" value="{{ mode }}">
            <button onclick="saveValue()">Save</button>
        </p>


        <script>
            function saveValue() {
              var enteredValue = document.getElementById("myInput").value;
            }
        </script>
    </div>

    <div id="list_of_src_adds">
        <h2>Source addresses:</h2>
        <ul id="list1" class="list1">
            {% for element in src_adds %}
                <li>{{ element }} <button onclick="deleteItem('list1', this)">Delete</button></li>
            {% endfor %}
        </ul>
        <input type="text" id="newItem1" placeholder="Add new item">
        <button onclick="addItem('list1', 'newItem1')">Add Item</button>
    </div>
    <div id="list_of_dst_adds">
        <h2>Destination addresses:</h2>
        <ul id="list2" class="list2">
            {% for element in dst_adds %}
                <li>{{ element }} <button onclick="deleteItem('list2', this)">Delete</button></li>
            {% endfor %}
        </ul>
        <input type="text" id="newItem2" placeholder="Add new item">
        <button onclick="addItem('list2', 'newItem2')">Add Item</button>
    </div>


    <script>
        function addItem(listId, inputId) {
            const list = document.getElementById(listId);
            const newItem = document.getElementById(inputId).value;
            const li = document.createElement("li");
            li.textContent = newItem;
            li.innerHTML += ' <button onclick="deleteItem(\'' + listId + '\', this)">Delete</button>';
            list.appendChild(li);
            document.getElementById(inputId).value = '';
        }

        function deleteItem(listId, element) {
            element.parentNode.remove();
        }
    </script>

    <script>
        var list1 = document.querySelectorAll('.list1 li');
        var list2 = document.querySelectorAll('.list2 li');

        var data = {
            list1: [],
            list2: []
        };

        list1.forEach(function(item) {
            data.list1.push(item.textContent);
        });

        list2.forEach(function(item) {
            data.list2.push(item.textContent);
        });

        data.enteredValue.push();

        fetch('localhost:5000/check', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });
    </script>

</body>

</html>
